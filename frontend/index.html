<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Interview Bot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/relativeTime.js"></script>
</head>
<body>
    <div id="toast-container"></div>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-top">
                <a href="#" class="logo"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM12 4C16.418 4 20 7.582 20 12C20 16.418 16.418 20 12 20C7.582 20 4 16.418 4 12C4 7.582 7.582 4 12 4Z" fill="url(#logo-gradient-fill)"/><path d="M15.5 9.5C15.5 11.433 13.933 13 12 13C10.067 13 8.5 11.433 8.5 9.5C8.5 7.567 10.067 6 12 6C13.933 6 15.5 7.567 15.5 9.5Z" fill="url(#logo-gradient-fill)"/><path d="M12 14C9.791 14 8 15.791 8 18H16C16 15.791 14.209 14 12 14Z" fill="url(#logo-gradient-fill)"/><defs><linearGradient id="logo-gradient-fill" x1="2" y1="2" x2="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#A855F7"/><stop offset="1" stop-color="#6366F1"/></linearGradient></defs></svg><span>AI Interview Bot</span></a>
                <nav class="main-nav">
                    <ul>
                        <li><a href="#dashboard" data-view="dashboard-view"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg> Dashboard</a></li>
                        <li><a href="#interviews" data-view="interviews-view"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line></svg> Interviews <span class="nav-badge" id="nav-badge-pending">0</span></a></li>
                        <li><a href="#talent-pool" data-view="talent-pool-view"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg> Talent Pool</a></li>
                    </ul>
                </nav>
            </div>
            <div class="sidebar-bottom"><div class="user-profile"><div class="card-avatar" style="width: 40px; height: 40px; font-size: 0.9rem; background-color: #6366f1;">HM</div><div class="user-info"><span class="user-name">HR Manager</span><span class="user-email">hrbot2025@gmail.com</span></div></div></div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header"><div class="search-wrapper"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><input type="text" id="search-input" placeholder="Search for candidate..."></div><div class="header-actions"><button class="icon-btn" title="Notifications"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></button><button id="new-interview-btn" class="action-btn primary">Create</button></div></header>
            
            <div id="dashboard-view" class="view-container">
                <h1>Dashboard</h1>
                <div class="stats-grid"><div class="stat-card"><div class="stat-icon-wrapper purple"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg></div><div class="stat-value" id="stat-total">0</div><div class="stat-label">Total Pipeline</div></div><div class="stat-card"><div class="stat-icon-wrapper green"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></div><div class="stat-value" id="stat-completed">0</div><div class="stat-label">Completed</div></div><div class="stat-card"><div class="stat-icon-wrapper yellow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg></div><div class="stat-value" id="stat-awaiting-call">0</div><div class="stat-label">Awaiting Call</div></div></div>
                <div class="dashboard-columns"><div class="dashboard-col"><div class="dashboard-card"><h3>Up Next (Ready for Review)</h3><div id="up-next-list"></div></div></div><div class="dashboard-col"><div class="dashboard-card"><h3>Performance Snapshot</h3><div class="chart-container"><canvas id="pipeline-chart"></canvas></div></div><div class="dashboard-card"><h3>Recent Activity</h3><div id="activity-feed"></div></div></div></div>
            </div>

            <div id="interviews-view" class="view-container hidden">
                <h2>Interview Pipeline</h2>
                <div class="pipeline-controls"><div class="filter-wrapper"><button class="filter-btn active" data-status="all">All</button><button class="filter-btn" data-status="pending">Awaiting Call</button><button class="filter-btn" data-status="in_progress">In Progress</button><button class="filter-btn" data-status="completed">Completed</button></div><div id="pagination-controls" class="pagination-controls"></div><div class="pipeline-actions"><button id="delete-selected-btn" class="action-btn delete-btn hidden">Delete Selected</button></div></div>
                <div class="pipeline-list-header"><div><input type="checkbox" id="select-all-checkbox" title="Select All"></div><div>Candidate</div><div>Status</div><div>Actions</div></div>
                <div id="interview-list-body" class="pipeline-list-body"></div><div id="empty-state" class="hidden"><p>No interviews found for this filter.</p></div>
            </div>
            
            <div id="talent-pool-view" class="view-container hidden">
                <h2>Talent Pool</h2><p class="form-description">A searchable database of all candidates ever interviewed.</p>
                <div class="talent-pool-table-container"><table class="talent-pool-table"><thead><tr><th>Candidate</th><th>Phone Number</th><th>Key Skills</th><th>Last Score</th><th>Resume</th></tr></thead><tbody id="talent-pool-list"></tbody></table></div>
                <div id="talent-pool-pagination" class="pagination-controls" style="justify-content: center; margin-top: 1.5rem;"></div>
            </div>
        </main>

        <!-- Details Panel -->
        <aside class="details-panel" id="details-panel">
            <div id="details-panel-placeholder" class="details-placeholder"><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line></svg><h3>Select an Interview</h3><p>Choose a candidate from the pipeline to see their detailed report.</p></div>
            <div id="details-panel-content" class="hidden"></div>
        </aside>
    </div>

    <!-- Modal -->
    <div id="create-modal" class="modal-overlay hidden">
        <div class="modal-content"><button class="modal-close" id="create-modal-close-btn">Ã—</button><div class="modal-tabs"><button class="tab-link active" data-tab="manual-form-tab">Create Manually</button><button class="tab-link" data-tab="screen-form-tab">Screen Resumes</button></div><div id="manual-form-tab" class="tab-content active"><form id="create-interview-form"><h3>Create a Single Interview</h3><div class="form-group"><label for="candidate_name">Candidate Name</label><input type="text" id="candidate_name" required></div><div class="form-group"><label for="phone_number">Candidate Phone Number</label><input type="tel" id="phone_number" required placeholder="+12223334444"></div><div class="form-group"><label for="job_position">Job Position</label><input type="text" id="job_position" required></div><div class="form-group"><label for="job_description">Full Job Description</label><textarea id="job_description" rows="4" required></textarea></div><div class="form-group"><label for="skills_to_assess">Skills to Assess (comma-separated)</label><input type="text" id="skills_to_assess" placeholder="e.g., Python, AWS"></div><button type="submit" class="submit-btn" id="submit-btn"><span id="btn-text">Create Interview</span><div class="loader hidden" id="loader"></div></button><p id="error-message" class="error-text hidden"></p></form></div>
            <div id="screen-form-tab" class="tab-content hidden"><form id="screen-resumes-form"><h3>Automated Resume Screening</h3><p class="form-description">Upload a Job Description and resumes for an AI-powered analysis.</p><div class="form-group"><label for="saved-jd-select">Use a Saved Job Description</label><select id="saved-jd-select"><option value="">-- Select a saved JD --</option></select></div><div class="form-group"><label for="jd_text">Or Paste a New Job Description</label><textarea id="jd_text" name="job_description" rows="4" required></textarea></div><div class="form-group" id="save-jd-group"><input type="checkbox" id="save-jd-checkbox" name="save_jd" value="true"><label for="save-jd-checkbox" class="inline-label">Save this Job Description for later</label><input type="text" id="jd-title-input" name="jd_title" class="hidden" placeholder="Enter a title for this JD (e.g., 'Senior Python Dev Q3')"></div><div class="form-group"><label for="resume-files">Upload Resumes (PDFs only)</label><input type="file" id="resume-files" name="resumes" multiple accept=".pdf" required></div><button type="submit" class="submit-btn" id="screen-btn"><span id="screen-btn-text">Analyze Resumes</span><div class="loader hidden" id="screen-loader"></div></button><p id="screen-message" class="message-text hidden"></p></form><div id="resume-results-container" class="hidden"><div class="results-header"><h3>Analysis Results</h3><button id="screen-again-btn" class="text-btn">Screen More</button></div><div id="resume-results-list"></div></div></div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>